<!DOCTYPE html>

<html>
    <head>
        <title>Walls ::: Infinite Wall</title>
        <link rel="stylesheet" media="screen" href="/assets/stylesheets/bootstrap.css">
        <link rel="stylesheet" media="screen" href="/assets/stylesheets/main.css">
        <link type="text/css" rel="stylesheet" href="/assets/stylesheets/jquery.fileupload-ui.css"/>
        <!--<link rel="stylesheet" media="screen" href="/assets/stylesheets/style.css">-->
        <link rel="stylesheet" media="screen" href="/assets/stylesheets/redactor.css">
        <link rel="shortcut icon" type="image/png" href="/assets/images/wall.ico">
        <script src="/assets/javascripts/jquery-1.7.1.min.js" type="text/javascript"></script>
        <script src="/assets/javascripts/bootstrap.js" type="text/javascript"></script>
        <script src="/assets/javascripts/rangy/rangy-core.js" type="text/javascript"></script>

        <style type="text/css">
            #ta,#ce, #ta-log, #ce-log {
                width:500px;
                height:500px;
                position:relative;
                border:1px solid black;
            }

            #ta,#ce {
                float:left;
            }

            #ta-log, #ce-log {
                float:right;
            }

            .container {
                width:1020px;
                clear:both;
            }
        </style>
    </head>
<body>
<div class='container'>
<textarea id='ta'></textarea><div id='ta-log'></div>
</div>

<div class='container'>
<div id='ce' contenteditable='true'>
<b>B</b>aaa<i>iii</i>
</div><div id='ce-log'></div>
</div>
<script type="text/javascript">



    $('#ta-log').on('mousemove', function(e) {
        console.log($('#ta').val() + $('#ta-log').val())
        var ra = rangy.createRangyRange()
        //console.log(ra.startContainer, ra.startOffset, ra.endContainer, ra.endOffset, ra.commonAncestorContainer, ra.collapsed);
        var sel = rangy.getSelection()

        console.log(sel.anchorNode, sel.anchorOffset, sel.focusNode ,sel.focusOffset, sel.isCollapsed, sel.inspect())
        

    })

		$(document).ready(function() {
			$('#ce').focusin(function() { console.log('focusin') })
			$('#ce').focusout(function() { console.log('focusout') })
		})
</script>
</body>
</html>
